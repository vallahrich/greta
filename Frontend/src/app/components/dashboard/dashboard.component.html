<div class="dashboard-container">
  <header class="dashboard-header">
    <h1>FlowelleA Period Tracker</h1>
    <nav class="dashboard-nav">
      <a mat-button routerLink="/calendar">
        <mat-icon>calendar_today</mat-icon>
        Calendar
      </a>
      <a mat-button routerLink="/profile">
        <mat-icon>person</mat-icon>
        Profile
      </a>
      <button mat-icon-button (click)="logout()">
        <mat-icon>logout</mat-icon>
      </button>
    </nav>
  </header>

  <main class="dashboard-content">

    <!-- Summary cards -->
    <section class="summary-card">
      <div class="cycle-summary">
        <div class="cycle-stats">
          <div class="stat-item">
            <div class="stat-value">
              {{ averageCycleLength ?? '—' }}
            </div>
            <div class="stat-label">
              Avg. Cycle Length
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-value">
              {{ averagePeriodLength ?? '—' }}
            </div>
            <div class="stat-label">
              Avg. Period Length
            </div>
          </div>
        </div>
        <!-- we’re not showing Next Period, so no .prediction-info / .next-period here -->
      </div>
    </section>

    <!-- Recent cycles -->
    <section class="cycles-section">
      <div class="section-header">
        <h2>Your Recent Cycles</h2>
        <button mat-raised-button color="primary" routerLink="/cycle/add">
          <mat-icon>add</mat-icon>
          New Cycle
        </button>
      </div>

      <div *ngIf="recentCycles.length === 0" class="empty-state">
        <p>No cycles recorded yet.</p>
        <button mat-raised-button color="accent" routerLink="/cycle/add">
          Add First Cycle
        </button>
      </div>

      <div class="cycles-list">
        <mat-card *ngFor="let cycle of recentCycles" class="cycle-card">
          
          <!-- dates + duration -->
          <div class="cycle-dates">
            <div class="date-range">
              <span class="start-date">
                {{ cycle.startDate | date:'mediumDate' }}
              </span>
              <span class="date-separator">→</span>
              <span class="end-date">
                {{ cycle.endDate | date:'mediumDate' }}
              </span>
            </div>
            <div class="cycle-duration">
              <div class="duration-value">
                {{ cycle.duration }}
              </div>
              <div class="duration-label">
                days
              </div>
            </div>
          </div>

          <!-- symptoms -->
          <mat-card-content *ngIf="cycle.symptoms?.length">
            <div class="symptoms-list">
              <strong>Symptoms:</strong>
              <span *ngFor="let s of cycle.symptoms; let last = last">
                {{ s.name }}<span *ngIf="!last">, </span>
              </span>
            </div>
          </mat-card-content>

          <!-- actions -->
          <mat-card-actions class="cycle-actions" align="end">
            <button mat-icon-button color="primary"
                    [routerLink]="['/cycle/edit', cycle.cycleId]">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button color="warn"
                    (click)="onDeleteCycle(cycle.cycleId)">
              <mat-icon>delete</mat-icon>
            </button>
          </mat-card-actions>
        </mat-card>
      </div>
    </section>

  </main>
</div>
